---
title: "VOX Visualizations and Metrics"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{VOX Visualizations and Metrics}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(voxanalysis)
```

The `voxanalysis` packages provides many distinct data visualizations and measures of variability to assist a user in diagnosis a speaker with autism spectrum disorder.

A user can generate a summary report with all data visualizations and measures using the Shiny application or the `util_generate_word_doc_report` function. Instructions for generating a report can be found [here](./generatingreports.html).

The individual data visualizations, tables, and measures can be generated by a user with `R`. These functions begin with the prefixes:
 - **calc_**
 - **plot_**
 - **table_**

## Area Q

*NOTE: FURTHER DOCUMENTATION IS NEEDED HERE.*

### Area Q Plot
A user can generate an Area Q plot using `plot_area_q`. See `?plot_area_q` for more documentation.

```{r}
# Load example data
data("df_summarized_response_example")

# Generate an Area Q plot for selected dates
plot_area_q(
  df_summarized_response = df_summarized_response_example[1:2, ],
  date_primary = "2024-08-23",
  ind_doc_version = TRUE
)
```


### Area Q Metrics
*NOTE: FURTHER CLARIFICATION IS NEEDED HERE ON METRIC DESCRIPTIONS*

The Area Q plot can be supplemented by additional metrics:

1. Centroid, *need definition or description*
2. Centroidal Distance, *need definition or description*
3. Moment of Area Q, *need definition or description*

The two report generation methods will provide these metrics next to the Area Q plot.

They also can be generated with `calc_centroid`. See `?calc_centroid` for more documentation.

```{r}
data("df_input_response_example")
calc_centroid(df_input_response = df_input_response_example)
```

## VOX Line Chart

*NOTE: FURTHER CLARIFICATION IS NEEDED HERE ON HOW TO READ AND UNDERSTAND THE VOX LINE PLOT*

See `?plot_vox_line` for more documentation.

```{r}
# Load example data
data("df_input_response_example")

# Generate a VOX line chart across verbal episodes
plot_vox_line(
  df_input_response = df_input_response_example,
  ind_hide_heading = FALSE,
  ind_doc_version = TRUE)
```

## VOX Pie Chart

*NOTE: FURTHER CLARIFICATION IS NEEDED HERE ON HOW TO READ AND UNDERSTAND*

See `?plot_vox_piechart` for more documentation.

```{r}
# Load example data
library(dplyr)
data("df_summarized_response_example")

# Filter to a single evaluation date, as the pie chart works with one date at a time
dat <- df_summarized_response_example %>%
    filter(date_of_evaluation == max(date_of_evaluation))

# Generate the VOX pie chart
plot_vox_piechart(
  df_summarized_response = dat,
  ind_doc_version = TRUE)
```

## Speaker's SCoRE

*NOTE: FURTHER CLARIFICATION IS NEEDED HERE ON HOW TO READ AND UNDERSTAND*

The Speaker's SCoRE is often paired with the pie chart, particularly on the summary reports. See `?calc_speakers_score` for more documentation.

```{r}
library(dplyr)
data("df_summarized_response_example")

# Filter the data to a single evaluation date for accurate SCoRE calculation
dat <- df_summarized_response_example %>%
  filter(date_of_evaluation == max(date_of_evaluation))

# Calculate the Speaker's SCoRE
calc_speakers_SCoRE(df_summarized_response = dat)
```

## Cochran's Q Test Table

*NOTE: FURTHER CLARIFICATION IS NEEDED HERE ON HOW TO READ AND UNDERSTAND*

See `?table_cochrans_q_test` for more documentation.

```{r}
# Load example response data
data("df_input_response_example")

# Generate a summary table with Cochran's Q test and supporting statistics
table_cochrans_q_test(df_input_response = df_input_response_example)
```

## Hierarchy Table

*NOTE: FURTHER CLARIFICATION IS NEEDED HERE ON HOW TO READ AND UNDERSTAND*

See `?table_prompt_hieararchy` for more documentation.

```{r}
# Load example data
library(dplyr)
data("df_summarized_response_example")

# Filter to a single evaluation date, as the table works with one date at a time
dat <- df_summarized_response_example %>%
    filter(date_of_evaluation == max(date_of_evaluation))

# Generate the prompt hierarchy table
table_prompt_hierarchy(df_summarized_response = dat)
```
